// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © henry_oliver

//@version=6
indicator(title = "NASDAQ 100 Up-Down Volume Delta", shorttitle = "NDX Vol Δ", overlay = false)

// === CONSTANTS ===
// Nord Theme Color
const color NORD1  = #3B4252
const color NORD8  = #88C0D0
const color NORD9  = #81A1C1

// === DATA FETCHING ===
// Fetch NASDAQ 100 up and down volume
float upVol = request.security(symbol = "USI:UPVOL.NQ", timeframe = timeframe.period, expression = close, lookahead = barmerge.lookahead_off)
float downVol = request.security(symbol = "USI:DNVOL.NQ", timeframe = timeframe.period, expression = close, lookahead = barmerge.lookahead_off)

// Calculate volume delta (difference between up and down volume)
float volumeDelta = upVol - downVol

// === VISUALIZATION ===
// Determine bar color based on delta direction
color barColor = volumeDelta >= 0 ? NORD8 : NORD9

// Plot volume delta as candlestick bars without wicks or borders
plotcandle(open = 0, high = math.max(0, volumeDelta), low = math.min(0, volumeDelta), close = volumeDelta, title = "Volume Delta", color = barColor, wickcolor = na, bordercolor = na, editable = true)

// Plot zero line
hline(price = 0, title = "Zero Line", color = NORD1, linestyle = hline.style_solid, linewidth = 2, editable = true)
